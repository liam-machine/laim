{
  "$schema": "https://developer.microsoft.com/json-schemas/fabric/item/report/definition/visualContainer/2.4.0/schema.json",
  "name": "{{VISUAL_NAME}}",
  "position": {
    "x": 40,
    "y": 80,
    "width": 350,
    "height": 350,
    "z": 0,
    "tabOrder": 0
  },
  "visual": {
    "$schema": "https://developer.microsoft.com/json-schemas/fabric/item/report/definition/visualConfiguration/2.2.0/schema.json",
    "visualType": "pieChart",
    "drillFilterOtherVisuals": true,
    "query": {
      "queryState": {
        "Category": {
          "projections": [
            {
              "field": {
                "Column": {
                  "Expression": {
                    "SourceRef": {
                      "Entity": "{{TABLE_NAME}}"
                    }
                  },
                  "Property": "{{CATEGORY_COLUMN}}"
                }
              },
              "queryRef": "{{TABLE_NAME}}.{{CATEGORY_COLUMN}}",
              "displayName": "{{CATEGORY_DISPLAY_NAME}}"
            }
          ]
        },
        "Y": {
          "projections": [
            {
              "field": {
                "Measure": {
                  "Expression": {
                    "SourceRef": {
                      "Entity": "{{MEASURE_TABLE}}"
                    }
                  },
                  "Property": "{{MEASURE_NAME}}"
                }
              },
              "queryRef": "{{MEASURE_TABLE}}.{{MEASURE_NAME}}",
              "displayName": "{{MEASURE_DISPLAY_NAME}}"
            }
          ]
        }
      }
    },
    "objects": {
      "legend": [
        {
          "properties": {
            "show": {
              "expr": {
                "Literal": {
                  "Value": "true"
                }
              }
            },
            "position": {
              "expr": {
                "Literal": {
                  "Value": "'Right'"
                }
              }
            }
          }
        }
      ],
      "dataPoint": [
        {
          "properties": {}
        }
      ],
      "labels": [
        {
          "properties": {
            "show": {
              "expr": {
                "Literal": {
                  "Value": "true"
                }
              }
            },
            "labelStyle": {
              "expr": {
                "Literal": {
                  "Value": "'Percent of total'"
                }
              }
            }
          }
        }
      ],
      "slices": [
        {
          "properties": {
            "innerRadiusRatio": {
              "expr": {
                "Literal": {
                  "Value": "0D"
                }
              }
            }
          }
        }
      ]
    }
  },
  "_comments": {
    "_description": "PBIR Pie Chart Visual Template - displays proportional data as slices",
    "_usage": "Clone this file into your report's pages/[pageName]/visuals/[visualName]/ folder as visual.json",
    "_placeholders": {
      "{{VISUAL_NAME}}": "Unique 20-character identifier (e.g., 'pie_sales_by_region')",
      "{{TABLE_NAME}}": "The table containing the category column (e.g., 'Regions')",
      "{{CATEGORY_COLUMN}}": "The column for slice categories (e.g., 'Region')",
      "{{CATEGORY_DISPLAY_NAME}}": "Legend/label for categories (e.g., 'Sales Region')",
      "{{MEASURE_TABLE}}": "The table containing the measure (e.g., 'Sales')",
      "{{MEASURE_NAME}}": "The measure for slice sizes (e.g., 'Total Sales')",
      "{{MEASURE_DISPLAY_NAME}}": "Display label for values (e.g., 'Sales Amount')"
    },
    "_position": {
      "x": "Horizontal position from left edge in pixels",
      "y": "Vertical position from top edge in pixels",
      "width": "Visual width in pixels (pie charts work best square)",
      "height": "Visual height in pixels (match width for circular appearance)",
      "z": "Z-order stacking (higher values on top)",
      "tabOrder": "Keyboard navigation order"
    },
    "_queryState_roles": {
      "Category": "Slice categories (Legend field)",
      "Y": "Slice values (determines slice size)",
      "Tooltips": "Optional - additional tooltip fields"
    },
    "_objects_formatting": {
      "legend": {
        "show": "Display legend (true/false)",
        "position": "'Top', 'Bottom', 'Left', 'Right', 'TopCenter', 'BottomCenter'"
      },
      "dataPoint": "Individual slice colors",
      "labels": {
        "show": "Show data labels on slices",
        "labelStyle": "'Data', 'Category', 'Percent of total', 'All'"
      },
      "slices": {
        "innerRadiusRatio": "0 = pie chart, 30-70 = donut chart"
      }
    },
    "_donut_conversion": {
      "_description": "To convert to donut chart, change innerRadiusRatio",
      "pieChart": "innerRadiusRatio: 0D (solid pie)",
      "donutChart": "innerRadiusRatio: 50D (hollow center)"
    },
    "_visualType_alternatives": {
      "pieChart": "Standard pie or donut (this template)",
      "donutChart": "Alternative donut visual type",
      "funnel": "Funnel chart for sequential proportions"
    },
    "_tips": {
      "limitSlices": "Pie charts work best with 3-7 categories",
      "donutHole": "Use innerRadiusRatio 40-60 for readable donut charts",
      "percentages": "Use 'Percent of total' labelStyle for clear proportions",
      "sorting": "Values automatically sort largest to smallest"
    }
  }
}
